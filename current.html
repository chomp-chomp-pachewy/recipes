<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>chomp recipes</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    /* ---------------------------------------------------- */
    /* === BASE STYLES & LAYOUT === */
    /* ---------------------------------------------------- */

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', sans-serif;
      background-color: #fdfdfd;
      color: #434343;
      line-height: 1.7;
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 300px;
      background-color: #f5f5f5;
      border-right: 1px solid #e0e0e0;
      overflow-y: auto;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
    }

    .recipe-list-container {
      position: relative;
      max-height: calc(100vh - 120px);
      overflow-y: auto;
      flex-grow: 1;
      mask-image: linear-gradient(to bottom, black 95%, transparent 100%);
      -webkit-mask-image: linear-gradient(to bottom, black 95%, transparent 100%);
    }

    .sidebar-header {
      padding: 30px 20px 10px 20px;
      text-align: center;
      cursor: pointer;
      flex-shrink: 0;
    }

    .sidebar-title {
      font-size: 1.6em;
      font-weight: 300;
      color: #d3687e;
      flex-shrink: 0;
    }

    /* ---------------------------------------------------- */
    /* === SEARCH & LIST ITEMS === */
    /* ---------------------------------------------------- */

    .search-box {
      width: calc(100% - 40px);
      margin: 0 20px 20px 20px;
      padding: 12px 16px;
      font-size: 15px;
      border: 1px solid #434343;
      border-radius: 8px;
      background-color: #ffffff;
      color: #434343;
      flex-shrink: 0;
    }

    .search-box:focus { outline: none; border-color: #d3687e; }

    .recipe-list { list-style: none; padding: 0; margin: 0; }

    .recipe-item {
      padding: 16px 20px;
      cursor: pointer;
      border-bottom: 1px solid #e0e0e0;
      transition: background-color 0.2s;
      color: #9e9e9e;
    }

    .recipe-item:last-child { border-bottom: none; }

    .recipe-item:hover { background-color: #f0f0f0; }

    .recipe-item.active {
      background-color: #d3687e;
      color: #ffffff;
    }

    .recipe-name {
      font-weight: 400;
      font-size: 1em;
    }

    /* Sticky Indicator and Shadow */
    .sticky-indicator {
      position: sticky;
      bottom: 0;
      text-align: center;
      background: rgba(253,253,253,0.9);
      padding: 8px 0;
      font-size: 0.85em;
      color: #777;
      opacity: 1;
      transition: opacity 0.3s ease;
      display: none;
    }

    .top-shadow {
      position: sticky;
      top: 0;
      width: 100%;
      height: 24px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.25s ease;
      background:
        linear-gradient(to bottom, rgba(253,253,253,1) 0%, rgba(253,253,253,0) 90%),
        linear-gradient(to bottom, rgba(0,0,0,0.15), rgba(0,0,0,0));
    }

    /* ---------------------------------------------------- */
    /* === RECIPE CONTENT === */
    /* ---------------------------------------------------- */

    .recipe-content {
      flex: 1;
      overflow-y: auto;
      padding: 40px 60px;
      max-width: 900px;
    }

    .recipe-header { margin-bottom: 30px; }

    .recipe-title {
      font-size: 2.1em;
      font-weight: 300;
      color: #d3687e;
      margin-bottom: 15px;
      line-height: 1.2;
    }

    .recipe-meta {
      color: #666666;
      font-size: 0.95em;
      margin-bottom: 10px;
    }

    .recipe-description {
      font-weight: 300;
      line-height: 1.8;
      margin-bottom: 25px;
      font-size: 1em;
    }

    .recipe-image {
      display: block;
      max-width: 50%;
      width: auto;
      height: auto;
      border-radius: 8px;
      margin: 0 auto 20px auto;
    }

    /* ---------------------------------------------------- */
    /* === ACTIONS & SECTIONS === */
    /* ---------------------------------------------------- */

    .recipe-actions {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .recipe-action-button {
      font-family: 'Inter', sans-serif !important;
      font-size: 0.95em;
      padding: 6px 10px;
      background: transparent;
      border: 1px solid #d3687e;
      color: #d3687e;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .recipe-action-button:hover {
      background-color: #d3687e;
      color: white;
    }

    /* Print Button (Legacy) */
    .print-button {
      padding: 10px 15px;
      font-size: 16px;
      background-color: #d3687e;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .print-button:hover { background-color: #c4596f; }

    /* ---------------------------------------------------- */
    /* === MEDIA QUERIES === */
    /* ---------------------------------------------------- */

    @media (max-width: 768px) {
      .recipe-list-container { max-height: calc(56px * 3); }
      body { flex-direction: column; }
      .sidebar { 
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e0e0e0;
        max-height: 40vh;
      }
      .recipe-content { padding: 20px; }
      .recipe-image { max-width: 80%; }
    }

    @media print {
      .sidebar, .search-box, .print-button, .copy-link-button, .sidebar-header, .recipe-list-container, .recipe-actions, .recipe-action-button {
          display: none !important;
      }
      body { display: block; min-height: auto; color: #000000; }
      .recipe-content { width: 100%; max-width: 100%; margin: 0; padding: 0; }
      .recipe-title { color: #000000 !important; }
      .recipe-meta, .recipe-description { color: #333333; }
      .section-title { color: #333333 !important; }
      .notes-section { background-color: transparent; border: 1px dashed #cccccc; }
      .ingredient-item { border-left-color: #cccccc !important; }
      .instruction-item::before { background-color: #000000 !important; }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="sidebar-header" onclick="resetRecipeView()" style="cursor: pointer;">
      <div class="sidebar-title">recipes / rituals</div>
    </div>
    <input type="text" class="search-box" id="searchBox" placeholder="search recipes...">
    
    <div class="recipe-list-container">
        <ul class="recipe-list" id="recipeList"></ul>
        <div id="stickyIndicator" class="sticky-indicator"></div>
        <div class="top-shadow"></div>
        <div class="no-results" id="noResults" style="display: none;">no recipes found</div>
    </div>
  </div>

  <div class="recipe-content" id="recipeContent"></div>

  <script>
    let recipes = [];
    let currentRecipe = null;

    function printRecipe() { window.print(); }

    function generateSlug(title) {
      return title
        .toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '') // Keep alphanumeric, space, and hyphen
        .replace(/\s+/g, '-') // Replace spaces with hyphens
        .trim();
    }

    function loadRecipeData() {
      // Example data, to be replaced with real data loading
      recipes = [
        { 
          title: "Spaghetti Bolognese",
          description: "A delicious Italian pasta dish with rich, meaty sauce.",
          ingredients: ["spaghetti", "ground beef", "tomato sauce", "onion", "garlic"],
          instructions: [
            "Boil pasta according to package instructions.",
            "Cook ground beef in a pan until browned.",
            "Add onion and garlic, cooking until softened.",
            "Add tomato sauce, simmer for 10 minutes.",
            "Serve sauce over pasta."
          ],
          time: "30 minutes"
        }
      ];

      displayRecipeList();
    }

    function displayRecipeList() {
      const recipeListContainer = document.getElementById('recipeList');
      recipeListContainer.innerHTML = '';
      recipes.forEach((recipe, index) => {
        const recipeItem = document.createElement('li');
        recipeItem.className = 'recipe-item';
        recipeItem.innerHTML = `<span class="recipe-name">${recipe.title}</span><span class="recipe-time">${recipe.time}</span>`;
        recipeItem.onclick = () => showRecipe(index);
        recipeListContainer.appendChild(recipeItem);
      });
    }

    function showRecipe(index) {
      currentRecipe = recipes[index];
      const recipeContent = document.getElementById('recipeContent');
      recipeContent.innerHTML = `
        <div class="recipe-header">
          <h2 class="recipe-title">${currentRecipe.title}</h2>
          <div class="recipe-meta">Time: ${currentRecipe.time}</div>
        </div>
        <div class="recipe-description">${currentRecipe.description}</div>
        <h3 class="section-title">Ingredients</h3>
        <ul class="ingredients-list">
          ${currentRecipe.ingredients.map(item => `<li class="ingredient-item">${item}</li>`).join('')}
        </ul>
        <h3 class="section-title">Instructions</h3>
        <ol class="instructions-list">
          ${currentRecipe.instructions.map(item => `<li class="instruction-item">${item}</li>`).join('')}
        </ol>
        <div class="recipe-actions">
          <button class="recipe-action-button" onclick="printRecipe()">Print Recipe</button>
        </div>
      `;
    }

    function resetRecipeView() {
      document.getElementById('recipeContent').innerHTML = '';
      document.getElementById('recipeList').innerHTML = '';
    }

    loadRecipeData();
  </script>
</body>
</html>
